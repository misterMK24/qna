<% if @link.destroyed? %>
  var link = document.querySelector('.link[link-id="<%= @link.id %>"]')
  var parent = link.parentElement
  var links = parent.parentElement
  parent.removeChild(link)
  var header = links.querySelector('h8')
  <% if @link.linkable.links.count.zero? %>
    links.removeChild(header)
  <% end %>
  var resourceName = "<%= @resource.class.name.downcase %>"

  if (resourceName == 'answer') {
    var resourceObject = document.querySelector('.answer[answer-id="<%= @resource.id %>"]')
  } else {
    var resourceObject = document.querySelector('.questions')  
  }
  updateForms(resourceObject)
  
<% end %>

function updateForms(resourceObject) {
  var linkForms = resourceObject.querySelectorAll('.nested-fields')
  linkEditForm = linkForms[<%= @position %>].remove()
  var inputForm = resourceObject.querySelector('input[value="<%= @link.id %>"]')
  inputForm.remove()
}
